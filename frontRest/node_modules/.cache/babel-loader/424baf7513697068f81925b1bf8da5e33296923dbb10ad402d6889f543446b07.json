{"ast":null,"code":"import React,{useState}from'react';import{SERVER_URL}from\"./Constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Login=props=>{const[user,setUser]=useState({username:'',password:''});const[message,setMessage]=useState('');const onChange=event=>{setUser({...user,[event.target.name]:event.target.value});};const login=async()=>{const basicu='Basic '+btoa(user.username+':'+user.password);try{const response=await fetch(\"\".concat(SERVER_URL,\"/login\"),{method:'GET',headers:{'Content-Type':'application/json','Authorization':basicu}});if(response.ok){const json=await response.json();sessionStorage.setItem(\"jwt\",'Bearer '+json.jwt);props.setUserType(json.role);props.setAuth(true);setMessage('');}else{setMessage(\"response error: \"+response.status);}}catch(err){setMessage(\"network error: \"+err);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h4\",{children:message}),/*#__PURE__*/_jsx(\"table\",{className:\"Center\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"UserName\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",value:user.username,onChange:onChange})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"password\",value:user.password,onChange:onChange})})]})]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{id:\"submit\",onClick:login,children:\"Login\"})]});};export default Login;","map":{"version":3,"names":["React","useState","SERVER_URL","jsx","_jsx","jsxs","_jsxs","Login","props","user","setUser","username","password","message","setMessage","onChange","event","target","name","value","login","basicu","btoa","response","fetch","concat","method","headers","ok","json","sessionStorage","setItem","jwt","setUserType","role","setAuth","status","err","className","children","htmlFor","type","id","onClick"],"sources":["/home/juangutierrez/Documents/CST438 - Software Engineering/Gradebook/frontRest/cst438_Assign3/src/Login.js"],"sourcesContent":["import React, {useState} from 'react';\nimport {SERVER_URL} from \"./Constants\";\n\nconst Login = (props) => {\n    const[user, setUser] = useState({username:'', password:''});\n    const[message,setMessage] = useState('');\n\n    const onChange = (event) => {\n        setUser({...user, [event.target.name] : event.target.value});\n    }\n  \n    const login = async () => {\n      const basicu='Basic '+btoa(user.username+':'+user.password);\n      try {\n        const response = await fetch(`${SERVER_URL}/login`,\n          {\n            method:'GET',\n            headers: {'Content-Type':'application/json',\n                      'Authorization': basicu }\n          });\n        if (response.ok) {\n          const json = await response.json();\n          sessionStorage.setItem(\"jwt\", 'Bearer '+json.jwt);\n          props.setUserType(json.role);\n          props.setAuth(true);\n          setMessage('');\n        } else {\n          setMessage(\"response error: \"+response.status);\n        }\n      } catch (err) {\n        setMessage(\"network error: \"+err);\n      }  \n    }\n\n    return (\n        <div className=\"App\">\n            <h4>{message}</h4>\n            <table className=\"Center\">\n                <tbody>\n                <tr>\n                    <td><label htmlFor=\"username\">UserName</label></td>\n                    <td><input type=\"text\" name=\"username\" value={user.username} onChange={onChange}/></td>\n                </tr>\n                <tr>\n                    <td><label htmlFor=\"password\">Password</label></td>\n                    <td><input type=\"text\" name=\"password\" value={user.password} onChange={onChange}/></td>\n                </tr>\n                </tbody>\n            </table>\n            <br/>\n            <button id=\"submit\" onClick={login}>Login</button>\n        </div>\n    );\n}\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
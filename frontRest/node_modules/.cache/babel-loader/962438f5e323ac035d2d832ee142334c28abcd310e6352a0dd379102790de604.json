{"ast":null,"code":"import React,{useState}from'react';import{confirmAlert}from'react-confirm-alert';// Import\nimport'react-confirm-alert/src/react-confirm-alert.css';// Import css\nimport SectionUpdate from'./SectionUpdate';import SectionAdd from'./SectionAdd';import Button from'@mui/material/Button';import{SERVER_URL}from'../../Constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SectionsView(props){const headers=['SecNo','CourseId','SecId','Year','Semester','Building','Room','Times','',''];const[sections,setSections]=useState([]);const[search,setSearch]=useState({courseId:'',year:'',semester:''});const[message,setMessage]=useState('');const fetchSections=async()=>{if(search.courseId===''||search.year===''||search.semester===''){setMessage(\"Enter search parameters\");}else{try{const jwt=sessionStorage.getItem('jwt');const response=await fetch(\"\".concat(SERVER_URL,\"/courses/\").concat(search.courseId,\"/sections?year=\").concat(search.year,\"&semester=\").concat(search.semester),{method:'GET',headers:{'Authorization':jwt}});if(response.ok){const data=await response.json();setSections(data);}else{const rc=await response.json();setMessage(rc.message);}}catch(err){setMessage(\"network error: \"+err);}}};const deleteSection=async secNo=>{try{const jwt=sessionStorage.getItem('jwt');const response=await fetch(\"\".concat(SERVER_URL,\"/sections/\").concat(secNo),{method:'DELETE',headers:{'Content-Type':'application/json','Authorization':jwt}});if(response.ok){setMessage(\"Section deleted\");fetchSections();}else{const rc=await response.json();setMessage(rc.message);}}catch(err){setMessage(\"network error: \"+err);}};const editChange=event=>{setSearch({...search,[event.target.name]:event.target.value});};const onDelete=e=>{const row_idx=e.target.parentNode.parentNode.rowIndex-1;const secNo=sections[row_idx].secNo;confirmAlert({title:'Confirm to delete',message:'Do you really want to delete?',buttons:[{label:'Yes',onClick:()=>deleteSection(secNo)},{label:'No'}]});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Sections\"}),/*#__PURE__*/_jsx(\"h4\",{children:message}),/*#__PURE__*/_jsx(\"h4\",{children:\"Enter course prefix, year, semester.  Example  cst 2024 Spring\"}),/*#__PURE__*/_jsx(\"table\",{className:\"Center\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Course Prefix:\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"scourseId\",name:\"courseId\",value:search.courseId,onChange:editChange})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Year:\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"syear\",name:\"year\",value:search.year,onChange:editChange})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Semester:\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"ssemester\",name:\"semester\",value:search.semester,onChange:editChange})})]})]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",id:\"search\",onClick:fetchSections,children:\"Search for Sections\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"table\",{className:\"Center\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:headers.map((s,idx)=>/*#__PURE__*/_jsx(\"th\",{children:s},idx))})}),/*#__PURE__*/_jsx(\"tbody\",{children:sections.map(s=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:s.secNo}),/*#__PURE__*/_jsx(\"td\",{children:s.courseId}),/*#__PURE__*/_jsx(\"td\",{children:s.secId}),/*#__PURE__*/_jsx(\"td\",{children:s.year}),/*#__PURE__*/_jsx(\"td\",{children:s.semester}),/*#__PURE__*/_jsx(\"td\",{children:s.building}),/*#__PURE__*/_jsx(\"td\",{children:s.room}),/*#__PURE__*/_jsx(\"td\",{children:s.times}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(SectionUpdate,{section:s,onClose:fetchSections})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{onClick:onDelete,children:\"Delete\"})})]},s.secNo))})]}),/*#__PURE__*/_jsx(SectionAdd,{onClose:fetchSections})]});}export default SectionsView;","map":{"version":3,"names":["React","useState","confirmAlert","SectionUpdate","SectionAdd","Button","SERVER_URL","jsx","_jsx","jsxs","_jsxs","SectionsView","props","headers","sections","setSections","search","setSearch","courseId","year","semester","message","setMessage","fetchSections","jwt","sessionStorage","getItem","response","fetch","concat","method","ok","data","json","rc","err","deleteSection","secNo","editChange","event","target","name","value","onDelete","e","row_idx","parentNode","rowIndex","title","buttons","label","onClick","children","className","type","id","onChange","map","s","idx","secId","building","room","times","section","onClose"],"sources":["/home/juangutierrez/Documents/CST438 - Software Engineering/Gradebook/frontRest/cst438_Assign3/src/components/admin/SectionsView.js"],"sourcesContent":["import React, {useState} from 'react';\nimport { confirmAlert } from 'react-confirm-alert'; // Import\nimport 'react-confirm-alert/src/react-confirm-alert.css'; // Import css\nimport SectionUpdate from './SectionUpdate';\nimport SectionAdd from './SectionAdd';\nimport Button from '@mui/material/Button';\nimport {SERVER_URL} from '../../Constants';\n\nfunction SectionsView(props) {\n    const headers = ['SecNo', 'CourseId', 'SecId',  'Year', 'Semester', 'Building', 'Room', 'Times', '', ''];\n\n    const [sections, setSections] = useState([]);\n\n    const [search, setSearch] = useState({courseId:'', year:'', semester:''});\n\n    const [message, setMessage] = useState('');\n\n    const fetchSections = async () => {\n        if (search.courseId==='' || search.year==='' || search.semester==='' ) {\n            setMessage(\"Enter search parameters\");\n        } else {\n            try {\n                const jwt = sessionStorage.getItem('jwt');\n                const response = await fetch(\n                    `${SERVER_URL}/courses/${search.courseId}/sections?year=${search.year}&semester=${search.semester}`,\n                    {\n                        method: 'GET',\n                        headers: {\n                            'Authorization': jwt\n                        }\n                    });\n                if (response.ok) {\n                    const data = await response.json();\n                    setSections(data);\n                } else {\n                    const rc = await response.json();\n                    setMessage(rc.message);\n                }\n            } catch(err) {\n                setMessage(\"network error: \"+err);\n            }\n        }\n    }\n\n    const deleteSection = async (secNo) => {\n        try {\n            const jwt = sessionStorage.getItem('jwt');\n            const response = await fetch (`${SERVER_URL}/sections/${secNo}`,\n                {\n                    method: 'DELETE',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Authorization': jwt\n                    },\n                });\n            if (response.ok) {\n                setMessage(\"Section deleted\");\n                fetchSections();\n            } else {\n                const rc = await response.json();\n                setMessage(rc.message);\n            }\n        } catch (err) {\n            setMessage(\"network error: \"+err);\n        }\n    }\n\n\n    const editChange = (event) => {\n        setSearch({...search,  [event.target.name]:event.target.value});\n    }\n\n    const onDelete = (e) => {\n        const row_idx = e.target.parentNode.parentNode.rowIndex - 1;\n        const secNo = sections[row_idx].secNo;\n        confirmAlert({\n            title: 'Confirm to delete',\n            message: 'Do you really want to delete?',\n            buttons: [\n                {\n                    label: 'Yes',\n                    onClick: () => deleteSection(secNo)\n                },\n                {\n                    label: 'No',\n                }\n            ]\n        });\n    }\n\n    return(\n        <div>\n            <h3>Sections</h3>\n\n            <h4>{message}</h4>\n            <h4>Enter course prefix, year, semester.  Example  cst 2024 Spring</h4>\n            <table className=\"Center\">\n                <tbody>\n                <tr>\n                    <td>Course Prefix:</td>\n                    <td><input type=\"text\" id=\"scourseId\" name=\"courseId\" value={search.courseId} onChange={editChange} /></td>\n                </tr>\n                <tr>\n                    <td>Year:</td>\n                    <td><input type=\"text\" id=\"syear\" name=\"year\" value={search.year} onChange={editChange} /></td>\n                </tr>\n                <tr>\n                    <td>Semester:</td>\n                    <td><input type=\"text\" id=\"ssemester\" name=\"semester\" value={search.semester} onChange={editChange} /></td>\n                </tr>\n                </tbody>\n            </table>\n            <br/>\n            <button type=\"submit\" id=\"search\" onClick={fetchSections} >Search for Sections</button>\n            <br/>\n            <br/>\n            <table className=\"Center\" >\n                <thead>\n                <tr>\n                    {headers.map((s, idx) => (<th key={idx}>{s}</th>))}\n                </tr>\n                </thead>\n                <tbody>\n                {sections.map((s) => (\n                    <tr key={s.secNo}>\n                        <td>{s.secNo}</td>\n                        <td>{s.courseId}</td>\n                        <td>{s.secId}</td>\n                        <td>{s.year}</td>\n                        <td>{s.semester}</td>\n                        <td>{s.building}</td>\n                        <td>{s.room}</td>\n                        <td>{s.times}</td>\n                        <td><SectionUpdate section={s} onClose={fetchSections} /></td>\n                        <td><Button onClick={onDelete}>Delete</Button></td>\n                    </tr>\n                ))}\n                </tbody>\n            </table>\n            <SectionAdd  onClose={fetchSections} />\n        </div>\n    );\n}\nexport default SectionsView;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
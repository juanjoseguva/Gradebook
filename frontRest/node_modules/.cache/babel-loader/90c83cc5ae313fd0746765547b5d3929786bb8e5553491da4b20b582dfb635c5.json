{"ast":null,"code":"import React,{useState,useEffect}from'react';import{confirmAlert}from'react-confirm-alert';// Import\nimport'react-confirm-alert/src/react-confirm-alert.css';// Import css\nimport CourseUpdate from'./CourseUpdate';import CourseAdd from'./CourseAdd';import Button from'@mui/material/Button';import{SERVER_URL}from'../../Constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CoursesView(props){const headers=['CourseId','Title','Credits','',''];const[courses,setCourses]=useState([]);const[message,setMessage]=useState('');const fetchCourses=async()=>{try{const jwt=sessionStorage.getItem('jwt');const response=await fetch(\"\".concat(SERVER_URL,\"/courses\"),{method:'GET',headers:{'Authorization':jwt}});if(response.ok){const courses=await response.json();setCourses(courses);}else{const json=await response.json();setMessage(\"response error: \"+json.message);}}catch(err){setMessage(\"network error: \"+err);}};useEffect(()=>{fetchCourses();},[]);const saveCourse=async course=>{try{const jwt=sessionStorage.getItem('jwt');const response=await fetch(\"\".concat(SERVER_URL,\"/courses\"),{method:'PUT',headers:{'Content-Type':'application/json','Authorization':jwt},body:JSON.stringify(course)});if(response.ok){setMessage(\"course saved\");fetchCourses();}else{const json=await response.json();setMessage(\"response error: \"+json.message);}}catch(err){setMessage(\"network error: \"+err);}};const addCourse=async course=>{try{const jwt=sessionStorage.getItem('jwt');const response=await fetch(\"\".concat(SERVER_URL,\"/courses\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':jwt},body:JSON.stringify(course)});if(response.ok){setMessage(\"course added\");fetchCourses();}else{const rc=await response.json();setMessage(rc.message);}}catch(err){setMessage(\"network error: \"+err);}};const deleteCourse=async courseId=>{try{const jwt=sessionStorage.getItem('jwt');const response=await fetch(\"\".concat(SERVER_URL,\"/courses/\").concat(courseId),{method:'DELETE',headers:{'Content-Type':'application/json','Authorization':jwt}});if(response.ok){setMessage(\"Course deleted\");fetchCourses();}else{const rc=await response.json();setMessage(\"Delete failed \"+rc.message);}}catch(err){setMessage(\"network error: \"+err);}};const onDelete=e=>{const row_idx=e.target.parentNode.parentNode.rowIndex-1;const courseId=courses[row_idx].courseId;confirmAlert({title:'Confirm to delete',message:'Do you really want to delete?',buttons:[{label:'Yes',onClick:()=>deleteCourse(courseId)},{label:'No'}]});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Courses\"}),/*#__PURE__*/_jsx(\"h4\",{children:message}),/*#__PURE__*/_jsxs(\"table\",{className:\"Center\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:headers.map((s,idx)=>/*#__PURE__*/_jsx(\"th\",{children:s},idx))})}),/*#__PURE__*/_jsx(\"tbody\",{children:courses.map(c=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:c.courseId}),/*#__PURE__*/_jsx(\"td\",{children:c.title}),/*#__PURE__*/_jsx(\"td\",{children:c.credits}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(CourseUpdate,{course:c,save:saveCourse})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{onClick:onDelete,children:\"Delete\"})})]},c.courseId))})]}),/*#__PURE__*/_jsx(CourseAdd,{save:addCourse})]});}export default CoursesView;","map":{"version":3,"names":["React","useState","useEffect","confirmAlert","CourseUpdate","CourseAdd","Button","SERVER_URL","jsx","_jsx","jsxs","_jsxs","CoursesView","props","headers","courses","setCourses","message","setMessage","fetchCourses","jwt","sessionStorage","getItem","response","fetch","concat","method","ok","json","err","saveCourse","course","body","JSON","stringify","addCourse","rc","deleteCourse","courseId","onDelete","e","row_idx","target","parentNode","rowIndex","title","buttons","label","onClick","children","className","map","s","idx","c","credits","save"],"sources":["/home/juangutierrez/Documents/CST438 - Software Engineering/Gradebook/frontRest/cst438_Assign3/src/components/admin/CoursesView.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport { confirmAlert } from 'react-confirm-alert'; // Import\nimport 'react-confirm-alert/src/react-confirm-alert.css'; // Import css\nimport CourseUpdate from './CourseUpdate';\nimport CourseAdd from './CourseAdd';\nimport Button from '@mui/material/Button';\nimport {SERVER_URL} from '../../Constants';\n\nfunction CoursesView(props) {\n    const headers = ['CourseId', 'Title', 'Credits',  '', ''];\n\n    const [courses, setCourses] = useState([    ]);\n\n    const [ message, setMessage ] = useState('');\n\n    const  fetchCourses = async () => {\n        try {\n            const jwt = sessionStorage.getItem('jwt');\n            const response = await fetch(\n                `${SERVER_URL}/courses`,\n                {\n                    method: 'GET',\n                    headers: {\n                        'Authorization': jwt\n                    }\n                });\n            if (response.ok) {\n                const courses = await response.json();\n                setCourses(courses);\n            } else {\n                const json = await response.json();\n                setMessage(\"response error: \"+json.message);\n            }\n        } catch (err) {\n            setMessage(\"network error: \"+err);\n        }\n    }\n\n    useEffect( () => {\n        fetchCourses();\n    },  []);\n\n    const saveCourse = async (course) => {\n        try {\n            const jwt = sessionStorage.getItem('jwt');\n            const response = await fetch (`${SERVER_URL}/courses`,\n                {\n                    method: 'PUT',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Authorization': jwt\n                    },\n                    body: JSON.stringify(course),\n                });\n            if (response.ok) {\n                setMessage(\"course saved\")\n                fetchCourses();\n            } else {\n                const json = await response.json();\n                setMessage(\"response error: \"+json.message);\n            }\n        } catch (err) {\n            setMessage(\"network error: \"+err);\n        }\n    }\n\n    const addCourse = async (course) => {\n        try {\n            const jwt = sessionStorage.getItem('jwt');\n            const response = await fetch (`${SERVER_URL}/courses`,\n                {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Authorization': jwt\n                    },\n                    body: JSON.stringify(course),\n                });\n            if (response.ok) {\n                setMessage(\"course added\")\n                fetchCourses();\n            } else {\n                const rc = await response.json();\n                setMessage(rc.message);\n            }\n        } catch (err) {\n            setMessage(\"network error: \"+err);\n        }\n    }\n\n    const deleteCourse = async (courseId) => {\n        try {\n            const jwt = sessionStorage.getItem('jwt');\n            const response = await fetch (`${SERVER_URL}/courses/${courseId}`,\n                {\n                    method: 'DELETE',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Authorization': jwt\n                    },\n                });\n            if (response.ok) {\n                setMessage(\"Course deleted\");\n                fetchCourses();\n            } else {\n                const rc = await response.json();\n                setMessage(\"Delete failed \"+rc.message);\n            }\n        } catch (err) {\n            setMessage(\"network error: \"+err);\n        }\n    }\n\n    const onDelete = (e) => {\n        const row_idx = e.target.parentNode.parentNode.rowIndex - 1;\n        const courseId = courses[row_idx].courseId;\n        confirmAlert({\n            title: 'Confirm to delete',\n            message: 'Do you really want to delete?',\n            buttons: [\n                {\n                    label: 'Yes',\n                    onClick: () => deleteCourse(courseId)\n                },\n                {\n                    label: 'No',\n                }\n            ]\n        });\n    }\n\n    return(\n        <div>\n            <h3>Courses</h3>\n            <h4>{message}</h4>\n            <table className=\"Center\" >\n                <thead>\n                <tr>\n                    {headers.map((s, idx) => (<th key={idx}>{s}</th>))}\n                </tr>\n                </thead>\n                <tbody>\n                {courses.map((c) => (\n                    <tr key={c.courseId}>\n                        <td>{c.courseId}</td>\n                        <td>{c.title}</td>\n                        <td>{c.credits}</td>\n                        <td><CourseUpdate course={c} save={saveCourse} /></td>\n                        <td><Button onClick={onDelete}>Delete</Button></td>\n                    </tr>\n                ))}\n                </tbody>\n            </table>\n            <CourseAdd save={addCourse} />\n        </div>\n    );\n}\nexport default CoursesView;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}